{"ast":null,"code":"var _jsxFileName = \"/Users/Abhinav/Documents/GitHub/saasshop/src/components/Cart/Cart.jsx\";\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport CartItem from \"./CartItem/CartItem.jsx\";\nimport CartItemSummary from \"./CartItemSummary/CartItemSummary.jsx\";\nimport \"./Cart.css\";\nimport firebase from \"../../firebase/firebase\";\nimport Gift from \"../../assets/images/gift.png\";\nimport { TextField, FormLabel, FormControl, FormControlLabel, Radio, RadioGroup } from '@material-ui/core';\n\nclass Cart extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      method: \"venmo\"\n    };\n\n    this.renderItems = (items, currentCart, onChange, calculateNumItems) => {\n      if (calculateNumItems(currentCart, items) === 0) {\n        return React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 21\n          },\n          __self: this\n        }, \"Your cart is empty!\");\n      } else {\n        return Object.keys(items).map(key => React.createElement(CartItem, {\n          key: key,\n          itemId: key,\n          quantity: currentCart[key],\n          item: items[key],\n          onChange: onChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 24\n          },\n          __self: this\n        }));\n      }\n    };\n\n    this.renderItemsSummary = (items, currentCart, onChange, calculateNumItems) => {\n      if (calculateNumItems(currentCart, items) === 0) {\n        return React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 38\n          },\n          __self: this\n        }, \"Your cart is empty!\");\n      } else {\n        return Object.keys(items).map(key => React.createElement(CartItemSummary, {\n          key: key,\n          itemId: key,\n          quantity: currentCart[key],\n          item: items[key],\n          onChange: onChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 41\n          },\n          __self: this\n        }));\n      }\n    };\n\n    this.onChangePayment = (event, value) => {\n      this.setState({\n        method: value\n      });\n    };\n\n    this.submitForm = event => {\n      event.preventDefault(); // Do not save if cart is empty\n\n      const {\n        items,\n        currentCart\n      } = this.props;\n\n      if (this.props.calculateNumItems(currentCart, items) === 0) {\n        document.querySelector(\"#emptyCart\").style.display = \"block\";\n        setTimeout(() => {\n          document.querySelector(\"#emptyCart\").style.display = \"none\";\n        }, 3000);\n        return;\n      } // Get form values\n\n\n      let name = this.getInputVal(\"name\");\n      let email = this.getInputVal(\"email\");\n      let venmo = document.getElementById(\"venmo\").checked;\n      let payment = venmo ? \"venmo\" : \"card\"; // Save order and show summary\n\n      this.saveOrder(name, email, payment, items, currentCart);\n      this.showAlert();\n    };\n\n    this.getInputVal = id => {\n      return document.getElementById(id).value;\n    };\n\n    this.componentDidMount = () => {\n      document.getElementById(\"paymentForm\").addEventListener(\"submit\", this.submitForm); // Reference orders collection\n\n      const ordersRef = firebase.firestore().collection(\"orders\");\n      this.setState({\n        ordersRef\n      });\n    };\n\n    this.saveOrder = (name, email, payment, items, currentCart) => {\n      this.state.ordersRef.add({\n        name: name,\n        email: email,\n        date: new Date(),\n        payment_method: payment,\n        items: currentCart,\n        total: this.calculateTotalPrice(currentCart, items)\n      }); //TODO: update on_order in inventory?\n    };\n\n    this.showAlert = () => {\n      document.querySelector(\".alert\").style.display = \"block\";\n      document.querySelector(\".container\").style.display = \"none\";\n    };\n  }\n\n  render() {\n    const {\n      items,\n      currentCart,\n      onChange,\n      calculateTotalPrice,\n      calculateNumItems\n    } = this.props;\n    return React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, \"Your Shopping Cart\"), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-lg-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, this.renderItems(items, currentCart, onChange, calculateNumItems)), React.createElement(\"div\", {\n      className: \"col-lg-5 offset-1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      id: \"paymentForm\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, React.createElement(TextField, {\n      label: \"Name\",\n      id: \"name\",\n      type: \"text\",\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }), React.createElement(TextField, {\n      label: \"Email\",\n      id: \"email\",\n      type: \"email\",\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      class: \"payment-method\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, React.createElement(FormControl, {\n      component: \"fieldset\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(FormLabel, {\n      component: \"legend\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, \"Payment Method\"), React.createElement(RadioGroup, {\n      \"aria-label\": \"payment\",\n      name: \"payment\",\n      value: this.value,\n      onChange: this.onChangePayment,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, React.createElement(FormControlLabel, {\n      value: \"venmo\",\n      control: React.createElement(Radio, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }),\n      label: \"Venmo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }), React.createElement(FormControlLabel, {\n      value: \"cash\",\n      control: React.createElement(Radio, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }),\n      label: \"Cash\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }), React.createElement(FormControlLabel, {\n      value: \"card\",\n      control: React.createElement(Radio, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }),\n      label: \"Card\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    })))), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, \"If you selected Venmo, please Venmo $\", calculateTotalPrice(currentCart, items), \" to @calsaas.\"), React.createElement(\"p\", {\n      style: {\n        textAlign: \"right\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, \"SUBTOTAL\"), \" $\", calculateTotalPrice(currentCart, items)), React.createElement(\"button\", {\n      className: \"submitButton\",\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, \"Submit\"), React.createElement(\"p\", {\n      id: \"emptyCart\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, \"Your cart is empty! Please add some items to your cart before submitting.\"))))), React.createElement(\"div\", {\n      className: \"alert container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-lg-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, \"Your Order Summary\"), React.createElement(\"p\", {\n      style: {\n        textAlign: \"right\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, \"SUBTOTAL\"), \" $\", calculateTotalPrice(currentCart, items)), this.renderItemsSummary(items, currentCart, onChange, calculateNumItems)), React.createElement(\"div\", {\n      className: \"col-lg-5 offset-1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      style: {\n        color: \"#ADDEFF\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, \"Thank you!\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, \"Your order has been received! We will send you a confirmation email, and you will receive another email when your order is ready for pickup. Thank you for shopping with us!\"), React.createElement(\"img\", {\n      src: Gift,\n      alt: \"gift\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    })))));\n  }\n\n}\n\nCart.propTypes = {\n  items: PropTypes.object,\n  currentCart: PropTypes.object,\n  onChange: PropTypes.func\n};\nexport default Cart;","map":{"version":3,"sources":["/Users/Abhinav/Documents/GitHub/saasshop/src/components/Cart/Cart.jsx"],"names":["React","Component","PropTypes","CartItem","CartItemSummary","firebase","Gift","TextField","FormLabel","FormControl","FormControlLabel","Radio","RadioGroup","Cart","state","method","renderItems","items","currentCart","onChange","calculateNumItems","Object","keys","map","key","renderItemsSummary","onChangePayment","event","value","setState","submitForm","preventDefault","props","document","querySelector","style","display","setTimeout","name","getInputVal","email","venmo","getElementById","checked","payment","saveOrder","showAlert","id","componentDidMount","addEventListener","ordersRef","firestore","collection","add","date","Date","payment_method","total","calculateTotalPrice","render","textAlign","color","propTypes","object","func"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport CartItem from \"./CartItem/CartItem.jsx\";\nimport CartItemSummary from \"./CartItemSummary/CartItemSummary.jsx\";\nimport \"./Cart.css\";\nimport firebase from \"../../firebase/firebase\";\nimport Gift from \"../../assets/images/gift.png\";\nimport { TextField, \n  FormLabel, FormControl, FormControlLabel, \n  Radio, RadioGroup \n  } from '@material-ui/core';\n\nclass Cart extends Component {\n  state = {\n    method: \"venmo\"\n  };\n\n  // Function to display items in cart before submit\n  renderItems = (items, currentCart, onChange, calculateNumItems) => {\n    if (calculateNumItems(currentCart, items) === 0) {\n      return <p>Your cart is empty!</p>;\n    } else {\n      return Object.keys(items).map((key) => (\n        <CartItem\n          key={key}\n          itemId={key}\n          quantity={currentCart[key]}\n          item={items[key]}\n          onChange={onChange}\n        />\n      ));\n    }\n  };\n\n  // Function to display items in cart after submit\n  renderItemsSummary = (items, currentCart, onChange, calculateNumItems) => {\n    if (calculateNumItems(currentCart, items) === 0) {\n      return <p>Your cart is empty!</p>;\n    } else {\n      return Object.keys(items).map((key) => (\n        <CartItemSummary\n          key={key}\n          itemId={key}\n          quantity={currentCart[key]}\n          item={items[key]}\n          onChange={onChange}\n        />\n      ));\n    }\n  };\n\n  onChangePayment = (event, value) => {\n    this.setState({method: value})\n  }\n\n  // Listen for form submit\n  submitForm = (event) => {\n    event.preventDefault();\n\n    // Do not save if cart is empty\n    const { items, currentCart } = this.props;\n    if (this.props.calculateNumItems(currentCart, items) === 0) {\n      document.querySelector(\"#emptyCart\").style.display = \"block\";\n      setTimeout(() => {\n        document.querySelector(\"#emptyCart\").style.display = \"none\";\n      }, 3000);\n      return;\n    }\n\n    // Get form values\n    let name = this.getInputVal(\"name\");\n    let email = this.getInputVal(\"email\");\n    let venmo = document.getElementById(\"venmo\").checked;\n    let payment = venmo ? \"venmo\" : \"card\";\n\n    // Save order and show summary\n    this.saveOrder(name, email, payment, items, currentCart);\n    this.showAlert();\n  };\n\n  // Function to get form values\n  getInputVal = (id) => {\n    return document.getElementById(id).value;\n  };\n\n  componentDidMount = () => {\n    document\n      .getElementById(\"paymentForm\")\n      .addEventListener(\"submit\", this.submitForm);\n    // Reference orders collection\n    const ordersRef = firebase.firestore().collection(\"orders\");\n    this.setState({ ordersRef });\n  };\n\n  // Save order to firebase\n  saveOrder = (name, email, payment, items, currentCart) => {\n    this.state.ordersRef.add({\n      name: name,\n      email: email,\n      date: new Date(),\n      payment_method: payment,\n      items: currentCart,\n      total: this.calculateTotalPrice(currentCart, items),\n    });\n    //TODO: update on_order in inventory?\n  };\n\n  // Show thank you + order summary page after submit\n  showAlert = () => {\n    document.querySelector(\".alert\").style.display = \"block\";\n    document.querySelector(\".container\").style.display = \"none\";\n  };\n\n  render() {\n    const {\n      items,\n      currentCart,\n      onChange,\n      calculateTotalPrice,\n      calculateNumItems,\n    } = this.props;\n    return (\n      <React.Fragment>\n        <div className=\"container\">\n          <h1>Your Shopping Cart</h1>\n          <div className=\"row\">\n            <div className=\"col-lg-6\">\n              {this.renderItems(\n                items,\n                currentCart,\n                onChange,\n                calculateNumItems\n              )}\n            </div>\n            <div className=\"col-lg-5 offset-1\">\n              <form id=\"paymentForm\">\n                <TextField label=\"Name\" id=\"name\" type=\"text\" required />\n                <br />\n                <TextField label=\"Email\" id=\"email\" type=\"email\" required />\n                <br />\n                <div class=\"payment-method\">\n                  <FormControl component=\"fieldset\">\n                    <FormLabel component=\"legend\">Payment Method</FormLabel>\n                    <RadioGroup aria-label=\"payment\" name=\"payment\" value={this.value} onChange={this.onChangePayment}>\n                      <FormControlLabel value=\"venmo\" control={<Radio />} label=\"Venmo\" />\n                      <FormControlLabel value=\"cash\" control={<Radio />} label=\"Cash\" />\n                      <FormControlLabel value=\"card\" control={<Radio />} label=\"Card\" />\n                    </RadioGroup>\n                  </FormControl>\n                </div>\n\n                <p>\n                  If you selected Venmo, please Venmo $\n                  {calculateTotalPrice(currentCart, items)} to @calsaas.\n                </p>\n                <p style={{ textAlign: \"right\" }}>\n                  <strong>SUBTOTAL</strong> $\n                  {calculateTotalPrice(currentCart, items)}\n                </p>\n                <button className=\"submitButton\" type=\"submit\">\n                  Submit\n                </button>\n                <p id=\"emptyCart\">\n                  Your cart is empty! Please add some items to your cart before\n                  submitting.\n                </p>\n              </form>\n            </div>\n          </div>\n        </div>\n        <div className=\"alert container\">\n          <div className=\"row\">\n            <div className=\"col-lg-6\">\n              <h1>Your Order Summary</h1>\n              <p style={{ textAlign: \"right\" }}>\n                <strong>SUBTOTAL</strong> $\n                {calculateTotalPrice(currentCart, items)}\n              </p>\n              {this.renderItemsSummary(\n                items,\n                currentCart,\n                onChange,\n                calculateNumItems\n              )}\n            </div>\n            <div className=\"col-lg-5 offset-1\">\n              <h1 style={{ color: \"#ADDEFF\" }}>Thank you!</h1>\n              <p>\n                Your order has been received! We will send you a confirmation\n                email, and you will receive another email when your order is\n                ready for pickup. Thank you for shopping with us!\n              </p>\n              <img src={Gift} alt=\"gift\" />\n            </div>\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nCart.propTypes = {\n  items: PropTypes.object,\n  currentCart: PropTypes.object,\n  onChange: PropTypes.func,\n};\n\nexport default Cart;\n"]},"metadata":{},"sourceType":"module"}