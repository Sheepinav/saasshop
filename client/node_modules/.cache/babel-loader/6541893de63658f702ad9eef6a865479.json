{"ast":null,"code":"var _jsxFileName = \"/Users/Abhinav/Documents/GitHub/saasshop/src/containers/ShopHome.jsx\";\nimport React, { Component } from \"react\";\nimport { BrowserRouter, Route } from \"react-router-dom\";\nimport NavBar from \"../components/NavBar/NavBar\";\nimport Shop from \"../components/Shop/Shop\";\nimport Cart from \"../components/Cart/Cart\";\nimport \"./ShopHome.css\";\nimport Zoomer from \"../assets/images/shirts/zoomer.png\";\nimport Logo from \"../assets/images/stickers/SAAS_logo.png\";\nimport firebase from \"../firebase/firebase\";\n\nclass ShopHome extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      items: [{\n        id: 1,\n        value: 0,\n        name: \"DOGDOGDOG\",\n        price: 20,\n        image: Zoomer\n      }, {\n        id: 2,\n        value: 0,\n        name: \"SAAS Logo\",\n        price: 2,\n        image: Logo\n      }],\n      data: {},\n      currentCart: {}\n    };\n\n    this.pullShopItems = () => {\n      firebase.firestore().collection(\"inventory\").get().then(snapshot => {\n        snapshot.forEach(item => {\n          const data = this.state.data;\n          data[item.id] = item.data();\n          this.setState({\n            data\n          });\n        });\n      });\n    };\n\n    this.onChange = (itemId, direction) => {\n      const cart = this.state.currentCart;\n      const currentCart = cart[itemId] ? cart[itemId] : 0;\n      const stock = this.state.data[itemId].stock;\n      let updatedCount = currentCart + direction < 0 ? 0 : currentCart + direction;\n\n      if (updatedCount > stock) {\n        updatedCount = stock;\n        alert(\"Cannot add item to cart. Max stock of item reached.\");\n      } //updatedCount = updatedCount > stock ? stock : updatedCount;\n\n\n      cart[itemId] = updatedCount;\n      this.setState({\n        cart\n      });\n    };\n\n    this.handleIncrement = item => {\n      const items = [...this.state.items];\n      const index = items.indexOf(item);\n      items[index] = { ...item\n      };\n      items[index].value++;\n      this.setState({\n        items\n      });\n    };\n\n    this.handleDecrement = item => {\n      const items = [...this.state.items];\n      const index = items.indexOf(item);\n      items[index] = { ...item\n      };\n\n      if (items[index].value > 0) {\n        items[index].value--;\n      }\n\n      this.setState({\n        items\n      });\n    };\n\n    this.handleDelete = item => {\n      const items = [...this.state.items];\n      const index = items.indexOf(item);\n      items[index] = { ...item\n      };\n      items[index].value = 0;\n      this.setState({\n        items\n      });\n    };\n  }\n\n  componentWillMount() {\n    this.pullShopItems();\n  }\n\n  render() {\n    return React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(NavBar, {\n      items: this.state.data,\n      onChange: this.onChange,\n      currentCart: this.state.currentCart,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      render: () => React.createElement(Shop, {\n        items: this.state.data,\n        onChange: this.onChange,\n        currentCart: this.state.currentCart,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/cart\",\n      render: props => React.createElement(Cart, Object.assign({}, props, {\n        items: this.state.data,\n        currentCart: this.state.currentCart,\n        onChange: this.onChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default ShopHome;","map":{"version":3,"sources":["/Users/Abhinav/Documents/GitHub/saasshop/src/containers/ShopHome.jsx"],"names":["React","Component","BrowserRouter","Route","NavBar","Shop","Cart","Zoomer","Logo","firebase","ShopHome","state","items","id","value","name","price","image","data","currentCart","pullShopItems","firestore","collection","get","then","snapshot","forEach","item","setState","onChange","itemId","direction","cart","stock","updatedCount","alert","handleIncrement","index","indexOf","handleDecrement","handleDelete","componentWillMount","render","props"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { BrowserRouter, Route } from \"react-router-dom\";\nimport NavBar from \"../components/NavBar/NavBar\";\nimport Shop from \"../components/Shop/Shop\";\nimport Cart from \"../components/Cart/Cart\";\nimport \"./ShopHome.css\";\nimport Zoomer from \"../assets/images/shirts/zoomer.png\";\nimport Logo from \"../assets/images/stickers/SAAS_logo.png\";\nimport firebase from \"../firebase/firebase\";\n\nclass ShopHome extends Component {\n  state = {\n    items: [\n      {\n        id: 1,\n        value: 0,\n        name: \"DOGDOGDOG\",\n        price: 20,\n        image: Zoomer,\n      },\n      {\n        id: 2,\n        value: 0,\n        name: \"SAAS Logo\",\n        price: 2,\n        image: Logo,\n      },\n    ],\n    data: {},\n    currentCart: {},\n  };\n\n  componentWillMount() {\n    this.pullShopItems();\n  }\n\n  pullShopItems = () => {\n    firebase\n      .firestore()\n      .collection(\"inventory\")\n      .get()\n      .then((snapshot) => {\n        snapshot.forEach((item) => {\n          const data = this.state.data;\n          data[item.id] = item.data();\n          this.setState({ data });\n        });\n      });\n  };\n\n  onChange = (itemId, direction) => {\n    const cart = this.state.currentCart;\n    const currentCart = cart[itemId] ? cart[itemId] : 0;\n    const stock = this.state.data[itemId].stock;\n    let updatedCount =\n      currentCart + direction < 0 ? 0 : currentCart + direction;\n    if (updatedCount > stock) {\n      updatedCount = stock;\n      alert(\"Cannot add item to cart. Max stock of item reached.\");\n    }\n    //updatedCount = updatedCount > stock ? stock : updatedCount;\n    cart[itemId] = updatedCount;\n    this.setState({ cart });\n  };\n\n  handleIncrement = (item) => {\n    const items = [...this.state.items];\n    const index = items.indexOf(item);\n    items[index] = { ...item };\n    items[index].value++;\n    this.setState({ items });\n  };\n\n  handleDecrement = (item) => {\n    const items = [...this.state.items];\n    const index = items.indexOf(item);\n    items[index] = { ...item };\n    if (items[index].value > 0) {\n      items[index].value--;\n    }\n    this.setState({ items });\n  };\n\n  handleDelete = (item) => {\n    const items = [...this.state.items];\n    const index = items.indexOf(item);\n    items[index] = { ...item };\n    items[index].value = 0;\n    this.setState({ items });\n  };\n\n  render() {\n    return (\n      <React.Fragment>\n        <NavBar\n          items={this.state.data}\n          onChange={this.onChange}\n          currentCart={this.state.currentCart}\n        />\n        <Route\n          exact\n          path=\"/\"\n          render={() => (\n            <Shop\n              items={this.state.data}\n              onChange={this.onChange}\n              currentCart={this.state.currentCart}\n            />\n          )}\n        />\n        <Route\n          path=\"/cart\"\n          render={(props) => (\n            <Cart\n              {...props}\n              items={this.state.data}\n              currentCart={this.state.currentCart}\n              onChange={this.onChange}\n            />\n          )}\n        />\n      </React.Fragment>\n    );\n  }\n}\n\nexport default ShopHome;\n"]},"metadata":{},"sourceType":"module"}