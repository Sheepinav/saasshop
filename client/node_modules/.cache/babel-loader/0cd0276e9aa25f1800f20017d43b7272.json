{"ast":null,"code":"var _jsxFileName = \"/Users/Abhinav/Documents/GitHub/saasshop/src/containers/ShopHome.jsx\";\nimport React, { Component } from \"react\";\nimport { BrowserRouter, Route } from \"react-router-dom\";\nimport NavBar from \"../components/NavBar/NavBar\";\nimport Shop from \"../components/Shop/Shop\";\nimport Cart from \"../components/Cart/Cart\";\nimport \"./ShopHome.css\";\nimport Zoomer from \"../assets/images/shirts/zoomer.png\";\nimport Logo from \"../assets/images/stickers/SAAS_logo.png\";\nimport firebase from \"../firebase/firebase\";\n\nclass ShopHome extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      items: [],\n      data: {},\n      currentCart: {}\n    };\n\n    this.pullShopItems = () => {\n      firebase.firestore().collection(\"inventory\").get().then(snapshot => {\n        snapshot.forEach(item => {\n          const data = this.state.data;\n          data[item.id] = item.data();\n          this.setState({\n            data\n          });\n        });\n      });\n    };\n\n    this.onChange = (itemId, direction) => {\n      const cart = this.state.currentCart;\n      const currentCart = cart[itemId] ? cart[itemId] : 0;\n      const stock = this.state.data[itemId].stock;\n      let updatedCount = currentCart + direction < 0 ? 0 : currentCart + direction;\n\n      if (updatedCount > stock) {\n        updatedCount = stock;\n        alert(\"Cannot add item to cart. Max stock of item reached.\");\n      } //updatedCount = updatedCount > stock ? stock : updatedCount;\n\n\n      cart[itemId] = updatedCount;\n      this.setState({\n        cart\n      });\n    };\n\n    this.handleIncrement = item => {\n      const items = [...this.state.items];\n      const index = items.indexOf(item);\n      items[index] = { ...item\n      };\n      items[index].value++;\n      this.setState({\n        items\n      });\n    };\n\n    this.handleDecrement = item => {\n      const items = [...this.state.items];\n      const index = items.indexOf(item);\n      items[index] = { ...item\n      };\n\n      if (items[index].value > 0) {\n        items[index].value--;\n      }\n\n      this.setState({\n        items\n      });\n    };\n\n    this.handleDelete = item => {\n      const items = [...this.state.items];\n      const index = items.indexOf(item);\n      items[index] = { ...item\n      };\n      items[index].value = 0;\n      this.setState({\n        items\n      });\n    };\n  }\n\n  componentWillMount() {\n    this.pullShopItems();\n  }\n\n  render() {\n    return React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(NavBar, {\n      items: this.state.data,\n      onChange: this.onChange,\n      currentCart: this.state.currentCart,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      render: () => React.createElement(Shop, {\n        items: this.state.data,\n        onChange: this.onChange,\n        currentCart: this.state.currentCart,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/cart\",\n      render: props => React.createElement(Cart, Object.assign({}, props, {\n        items: this.state.data,\n        currentCart: this.state.currentCart,\n        onChange: this.onChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default ShopHome;","map":{"version":3,"sources":["/Users/Abhinav/Documents/GitHub/saasshop/src/containers/ShopHome.jsx"],"names":["React","Component","BrowserRouter","Route","NavBar","Shop","Cart","Zoomer","Logo","firebase","ShopHome","state","items","data","currentCart","pullShopItems","firestore","collection","get","then","snapshot","forEach","item","id","setState","onChange","itemId","direction","cart","stock","updatedCount","alert","handleIncrement","index","indexOf","value","handleDecrement","handleDelete","componentWillMount","render","props"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { BrowserRouter, Route } from \"react-router-dom\";\nimport NavBar from \"../components/NavBar/NavBar\";\nimport Shop from \"../components/Shop/Shop\";\nimport Cart from \"../components/Cart/Cart\";\nimport \"./ShopHome.css\";\nimport Zoomer from \"../assets/images/shirts/zoomer.png\";\nimport Logo from \"../assets/images/stickers/SAAS_logo.png\";\nimport firebase from \"../firebase/firebase\";\n\nclass ShopHome extends Component {\n  state = {\n    items: [\n      \n    ],\n    data: {},\n    currentCart: {},\n  };\n\n  componentWillMount() {\n    this.pullShopItems();\n  }\n\n  pullShopItems = () => {\n    firebase\n      .firestore()\n      .collection(\"inventory\")\n      .get()\n      .then((snapshot) => {\n        snapshot.forEach((item) => {\n          const data = this.state.data;\n          data[item.id] = item.data();\n          this.setState({ data });\n        });\n      });\n  };\n\n  onChange = (itemId, direction) => {\n    const cart = this.state.currentCart;\n    const currentCart = cart[itemId] ? cart[itemId] : 0;\n    const stock = this.state.data[itemId].stock;\n    let updatedCount =\n      currentCart + direction < 0 ? 0 : currentCart + direction;\n    if (updatedCount > stock) {\n      updatedCount = stock;\n      alert(\"Cannot add item to cart. Max stock of item reached.\");\n    }\n    //updatedCount = updatedCount > stock ? stock : updatedCount;\n    cart[itemId] = updatedCount;\n    this.setState({ cart });\n  };\n\n  handleIncrement = (item) => {\n    const items = [...this.state.items];\n    const index = items.indexOf(item);\n    items[index] = { ...item };\n    items[index].value++;\n    this.setState({ items });\n  };\n\n  handleDecrement = (item) => {\n    const items = [...this.state.items];\n    const index = items.indexOf(item);\n    items[index] = { ...item };\n    if (items[index].value > 0) {\n      items[index].value--;\n    }\n    this.setState({ items });\n  };\n\n  handleDelete = (item) => {\n    const items = [...this.state.items];\n    const index = items.indexOf(item);\n    items[index] = { ...item };\n    items[index].value = 0;\n    this.setState({ items });\n  };\n\n  render() {\n    return (\n      <React.Fragment>\n        <NavBar\n          items={this.state.data}\n          onChange={this.onChange}\n          currentCart={this.state.currentCart}\n        />\n        <Route\n          exact\n          path=\"/\"\n          render={() => (\n            <Shop\n              items={this.state.data}\n              onChange={this.onChange}\n              currentCart={this.state.currentCart}\n            />\n          )}\n        />\n        <Route\n          path=\"/cart\"\n          render={(props) => (\n            <Cart\n              {...props}\n              items={this.state.data}\n              currentCart={this.state.currentCart}\n              onChange={this.onChange}\n            />\n          )}\n        />\n      </React.Fragment>\n    );\n  }\n}\n\nexport default ShopHome;\n"]},"metadata":{},"sourceType":"module"}