{"ast":null,"code":"var _jsxFileName = \"/Users/Abhinav/Documents/GitHub/saasshop/src/containers/ShopHome.jsx\";\nimport React, { Component } from \"react\";\nimport { Route } from \"react-router-dom\";\nimport NavBar from \"../components/NavBar/NavBar\";\nimport Shop from \"../components/Shop/Shop\";\nimport Cart from \"../components/Cart/Cart\";\nimport \"./ShopHome.css\";\nimport firebase from \"../firebase/firebase\";\n\nclass ShopHome extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: {},\n      currentCart: {}\n    };\n\n    this.pullShopItems = () => {\n      firebase.firestore().collection(\"inventory\").get().then(snapshot => {\n        snapshot.forEach(item => {\n          const data = this.state.data;\n          data[item.id] = item.data();\n          this.setState({\n            data\n          });\n        });\n      });\n    };\n\n    this.onChange = (itemId, direction) => {\n      const cart = this.state.currentCart;\n      const currentCart = cart[itemId] ? cart[itemId] : 0;\n      const stock = this.state.data[itemId].stock;\n      let updatedCount = currentCart + direction < 0 ? 0 : currentCart + direction;\n\n      if (updatedCount > stock) {\n        updatedCount = stock;\n        alert(\"Cannot add item to cart. Max stock of item reached.\");\n      } //updatedCount = updatedCount > stock ? stock : updatedCount;\n\n\n      cart[itemId] = updatedCount;\n      this.setState({\n        cart\n      });\n    };\n\n    this.handleIncrement = item => {\n      const items = [...this.state.items];\n      const index = items.indexOf(item);\n      items[index] = { ...item\n      };\n      items[index].value++;\n      this.setState({\n        items\n      });\n    };\n\n    this.handleDecrement = item => {\n      const items = [...this.state.items];\n      const index = items.indexOf(item);\n      items[index] = { ...item\n      };\n\n      if (items[index].value > 0) {\n        items[index].value--;\n      }\n\n      this.setState({\n        items\n      });\n    };\n\n    this.handleDelete = item => {\n      const items = [...this.state.items];\n      const index = items.indexOf(item);\n      items[index] = { ...item\n      };\n      items[index].value = 0;\n      this.setState({\n        items\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.pullShopItems();\n  }\n\n  render() {\n    return React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, React.createElement(Route, {\n      path: \"/\",\n      render: () => React.createElement(NavBar, {\n        items: this.state.data,\n        onChange: this.onChange,\n        currentCart: this.state.currentCart['0ol7jZ1IcRMKTvgxiigb'],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      render: () => React.createElement(Shop, {\n        items: this.state.data,\n        onChange: this.onChange,\n        currentCart: this.state.currentCart,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/cart\",\n      render: props => React.createElement(Cart, Object.assign({}, props, {\n        items: this.state.data,\n        currentCart: this.state.currentCart,\n        onChange: this.onChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default ShopHome;","map":{"version":3,"sources":["/Users/Abhinav/Documents/GitHub/saasshop/src/containers/ShopHome.jsx"],"names":["React","Component","Route","NavBar","Shop","Cart","firebase","ShopHome","state","data","currentCart","pullShopItems","firestore","collection","get","then","snapshot","forEach","item","id","setState","onChange","itemId","direction","cart","stock","updatedCount","alert","handleIncrement","items","index","indexOf","value","handleDecrement","handleDelete","componentDidMount","render","props"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,KAAT,QAAsB,kBAAtB;AACA,OAAOC,MAAP,MAAmB,6BAAnB;AACA,OAAOC,IAAP,MAAiB,yBAAjB;AACA,OAAOC,IAAP,MAAiB,yBAAjB;AACA,OAAO,gBAAP;AACA,OAAOC,QAAP,MAAqB,sBAArB;;AAEA,MAAMC,QAAN,SAAuBN,SAAvB,CAAiC;AAAA;AAAA;AAAA,SAC/BO,KAD+B,GACvB;AACNC,MAAAA,IAAI,EAAE,EADA;AAENC,MAAAA,WAAW,EAAE;AAFP,KADuB;;AAAA,SAU/BC,aAV+B,GAUf,MAAM;AACpBL,MAAAA,QAAQ,CACLM,SADH,GAEGC,UAFH,CAEc,WAFd,EAGGC,GAHH,GAIGC,IAJH,CAISC,QAAD,IAAc;AAClBA,QAAAA,QAAQ,CAACC,OAAT,CAAkBC,IAAD,IAAU;AACzB,gBAAMT,IAAI,GAAG,KAAKD,KAAL,CAAWC,IAAxB;AACAA,UAAAA,IAAI,CAACS,IAAI,CAACC,EAAN,CAAJ,GAAgBD,IAAI,CAACT,IAAL,EAAhB;AACA,eAAKW,QAAL,CAAc;AAAEX,YAAAA;AAAF,WAAd;AACD,SAJD;AAKD,OAVH;AAWD,KAtB8B;;AAAA,SAwB/BY,QAxB+B,GAwBpB,CAACC,MAAD,EAASC,SAAT,KAAuB;AAChC,YAAMC,IAAI,GAAG,KAAKhB,KAAL,CAAWE,WAAxB;AACA,YAAMA,WAAW,GAAGc,IAAI,CAACF,MAAD,CAAJ,GAAeE,IAAI,CAACF,MAAD,CAAnB,GAA8B,CAAlD;AACA,YAAMG,KAAK,GAAG,KAAKjB,KAAL,CAAWC,IAAX,CAAgBa,MAAhB,EAAwBG,KAAtC;AACA,UAAIC,YAAY,GACdhB,WAAW,GAAGa,SAAd,GAA0B,CAA1B,GAA8B,CAA9B,GAAkCb,WAAW,GAAGa,SADlD;;AAEA,UAAIG,YAAY,GAAGD,KAAnB,EAA0B;AACxBC,QAAAA,YAAY,GAAGD,KAAf;AACAE,QAAAA,KAAK,CAAC,qDAAD,CAAL;AACD,OAT+B,CAUhC;;;AACAH,MAAAA,IAAI,CAACF,MAAD,CAAJ,GAAeI,YAAf;AACA,WAAKN,QAAL,CAAc;AAAEI,QAAAA;AAAF,OAAd;AACD,KArC8B;;AAAA,SAuC/BI,eAvC+B,GAuCZV,IAAD,IAAU;AAC1B,YAAMW,KAAK,GAAG,CAAC,GAAG,KAAKrB,KAAL,CAAWqB,KAAf,CAAd;AACA,YAAMC,KAAK,GAAGD,KAAK,CAACE,OAAN,CAAcb,IAAd,CAAd;AACAW,MAAAA,KAAK,CAACC,KAAD,CAAL,GAAe,EAAE,GAAGZ;AAAL,OAAf;AACAW,MAAAA,KAAK,CAACC,KAAD,CAAL,CAAaE,KAAb;AACA,WAAKZ,QAAL,CAAc;AAAES,QAAAA;AAAF,OAAd;AACD,KA7C8B;;AAAA,SA+C/BI,eA/C+B,GA+CZf,IAAD,IAAU;AAC1B,YAAMW,KAAK,GAAG,CAAC,GAAG,KAAKrB,KAAL,CAAWqB,KAAf,CAAd;AACA,YAAMC,KAAK,GAAGD,KAAK,CAACE,OAAN,CAAcb,IAAd,CAAd;AACAW,MAAAA,KAAK,CAACC,KAAD,CAAL,GAAe,EAAE,GAAGZ;AAAL,OAAf;;AACA,UAAIW,KAAK,CAACC,KAAD,CAAL,CAAaE,KAAb,GAAqB,CAAzB,EAA4B;AAC1BH,QAAAA,KAAK,CAACC,KAAD,CAAL,CAAaE,KAAb;AACD;;AACD,WAAKZ,QAAL,CAAc;AAAES,QAAAA;AAAF,OAAd;AACD,KAvD8B;;AAAA,SAyD/BK,YAzD+B,GAyDfhB,IAAD,IAAU;AACvB,YAAMW,KAAK,GAAG,CAAC,GAAG,KAAKrB,KAAL,CAAWqB,KAAf,CAAd;AACA,YAAMC,KAAK,GAAGD,KAAK,CAACE,OAAN,CAAcb,IAAd,CAAd;AACAW,MAAAA,KAAK,CAACC,KAAD,CAAL,GAAe,EAAE,GAAGZ;AAAL,OAAf;AACAW,MAAAA,KAAK,CAACC,KAAD,CAAL,CAAaE,KAAb,GAAqB,CAArB;AACA,WAAKZ,QAAL,CAAc;AAAES,QAAAA;AAAF,OAAd;AACD,KA/D8B;AAAA;;AAM/BM,EAAAA,iBAAiB,GAAG;AAClB,SAAKxB,aAAL;AACD;;AAyDDyB,EAAAA,MAAM,GAAG;AACP,WACE,oBAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,KAAD;AACE,MAAA,IAAI,EAAC,GADP;AAEE,MAAA,MAAM,EAAE,MACN,oBAAC,MAAD;AACE,QAAA,KAAK,EAAE,KAAK5B,KAAL,CAAWC,IADpB;AAEE,QAAA,QAAQ,EAAE,KAAKY,QAFjB;AAGE,QAAA,WAAW,EAAE,KAAKb,KAAL,CAAWE,WAAX,CAAuB,sBAAvB,CAHf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAHJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAWE,oBAAC,KAAD;AACE,MAAA,KAAK,MADP;AAEE,MAAA,IAAI,EAAC,GAFP;AAGE,MAAA,MAAM,EAAE,MACN,oBAAC,IAAD;AACE,QAAA,KAAK,EAAE,KAAKF,KAAL,CAAWC,IADpB;AAEE,QAAA,QAAQ,EAAE,KAAKY,QAFjB;AAGE,QAAA,WAAW,EAAE,KAAKb,KAAL,CAAWE,WAH1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAXF,EAsBE,oBAAC,KAAD;AACE,MAAA,IAAI,EAAC,OADP;AAEE,MAAA,MAAM,EAAG2B,KAAD,IACN,oBAAC,IAAD,oBACMA,KADN;AAEE,QAAA,KAAK,EAAE,KAAK7B,KAAL,CAAWC,IAFpB;AAGE,QAAA,WAAW,EAAE,KAAKD,KAAL,CAAWE,WAH1B;AAIE,QAAA,QAAQ,EAAE,KAAKW,QAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAHJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAtBF,CADF;AAoCD;;AAtG8B;;AAyGjC,eAAed,QAAf","sourcesContent":["import React, { Component } from \"react\";\nimport { Route } from \"react-router-dom\";\nimport NavBar from \"../components/NavBar/NavBar\";\nimport Shop from \"../components/Shop/Shop\";\nimport Cart from \"../components/Cart/Cart\";\nimport \"./ShopHome.css\";\nimport firebase from \"../firebase/firebase\";\n\nclass ShopHome extends Component {\n  state = {\n    data: {},\n    currentCart: {},\n  };\n\n  componentDidMount() {\n    this.pullShopItems();\n  }\n\n  pullShopItems = () => {\n    firebase\n      .firestore()\n      .collection(\"inventory\")\n      .get()\n      .then((snapshot) => {\n        snapshot.forEach((item) => {\n          const data = this.state.data;\n          data[item.id] = item.data();\n          this.setState({ data });\n        });\n      });\n  };\n\n  onChange = (itemId, direction) => {\n    const cart = this.state.currentCart;\n    const currentCart = cart[itemId] ? cart[itemId] : 0;\n    const stock = this.state.data[itemId].stock;\n    let updatedCount =\n      currentCart + direction < 0 ? 0 : currentCart + direction;\n    if (updatedCount > stock) {\n      updatedCount = stock;\n      alert(\"Cannot add item to cart. Max stock of item reached.\");\n    }\n    //updatedCount = updatedCount > stock ? stock : updatedCount;\n    cart[itemId] = updatedCount;\n    this.setState({ cart });\n  };\n\n  handleIncrement = (item) => {\n    const items = [...this.state.items];\n    const index = items.indexOf(item);\n    items[index] = { ...item };\n    items[index].value++;\n    this.setState({ items });\n  };\n\n  handleDecrement = (item) => {\n    const items = [...this.state.items];\n    const index = items.indexOf(item);\n    items[index] = { ...item };\n    if (items[index].value > 0) {\n      items[index].value--;\n    }\n    this.setState({ items });\n  };\n\n  handleDelete = (item) => {\n    const items = [...this.state.items];\n    const index = items.indexOf(item);\n    items[index] = { ...item };\n    items[index].value = 0;\n    this.setState({ items });\n  };\n\n  render() {\n    return (\n      <React.Fragment>\n        <Route\n          path=\"/\"\n          render={() =>(\n            <NavBar\n              items={this.state.data}\n              onChange={this.onChange}\n              currentCart={this.state.currentCart['0ol7jZ1IcRMKTvgxiigb']}\n            />\n          )}\n        />\n        <Route\n          exact\n          path=\"/\"\n          render={() => (\n            <Shop\n              items={this.state.data}\n              onChange={this.onChange}\n              currentCart={this.state.currentCart}\n            />\n          )}\n        />\n        <Route\n          path=\"/cart\"\n          render={(props) => (\n            <Cart\n              {...props}\n              items={this.state.data}\n              currentCart={this.state.currentCart}\n              onChange={this.onChange}\n            />\n          )}\n        />\n      </React.Fragment>\n    );\n  }\n}\n\nexport default ShopHome;\n"]},"metadata":{},"sourceType":"module"}